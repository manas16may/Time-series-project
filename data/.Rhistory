p1 = forecast1$pred
obs1 = y_test$return
MSE_foreast1 = mean((p1 - obs1)^2)
MSE_foreast1
par(mfrow=c(1,2))
par(mfrow=c(1,2))
plot(y_test$return,type="l",col="red")
plot(forecast1$pred,type='l',col="green")
ts.plot(y_test$return,forecast1$pred , gpars = list(col = c("black", "red")))
mod.2 <- arimax(final$return, order=c(2,0,7), xtransf=final$SS, transfer=list(c(1,0))); mod.2
summary(mod.2)
library(tseries)
library(forecast)
library(foreign)
library(TSA)
mod.2 <- arimax(final$return, order=c(2,0,7), xtransf=final$SS, transfer=list(c(1,0))); mod.2
summary(mod.2)
mod.2 <- arimax(final$return, order=c(2,0,7), xtransf=final$SS, transfer=list(c(2,2))); mod.2
summary(mod.2)
rm(list=ls())
data=read.csv('stockdata.csv')
data$Date <- as.Date(data$Date)
data$Close=as.numeric(as.character(data$Close))
rm(list=ls())
data=read.csv('stockdata.csv')
data$Close=as.numeric(as.character(data$Close))
head(data)
rm(list=ls())
data=read.csv('stockdata.csv')
data$Close=as.numeric(as.character(data$Close))
head(data)
str(Data)
str(data)
price=data$Close
log_return=diff(log(price),lag=1)
head(coviddata)
coviddata=read.csv('covidcases.csv')
coviddata=coviddata[,-1]
head(coviddata)
coviddata=read.csv('covidcases.csv')
coviddata=coviddata[,-1]
head(coviddata)
coviddata=read.csv('covidcases.csv')
head(coviddata)
coviddata=coviddata[-1,]
head(coviddata)
finaldata=cbind(coviddata,data$Close)
finaldata=read.csv('timeseries.csv')
head(finaldata)
library(lmtest)
grangertest(Close~Daily.confirmed,order=1,data=finaldata)
grangertest(Close~Daily.confirmed,order=2,data=finaldata)
grangertest(Close~Daily.confirmed,order=3,data=finaldata)
price=finaldata$Close
log_return=diff(log(price),lag=1)
finaldata=finaldata[-1,]
finaldata['return']=log_return
grangertest(return~Daily.confirmed,order=1,data=finaldata)
grangertest(return~Daily.confirmed,order=2,data=finaldata)
finaldata
finaldata1=read.csv('timeseries1.csv')
price1=finaldata1$Close
log_return1=diff(log(price1),lag=1)
finaldata1=finaldata1[-1,]
finaldata1['return']=log_return1
grangertest(return~Daily.confirmed,order=1,data=finaldata1)
grangertest(return~Daily.confirmed,order=2,data=finaldata1)
############firstlockdownforniftysmallcap############
firstlockdown=finaldata[22:62,]
grangertest(return~Daily.confirmed,order=2,data=firstlockdown)
grangertest(return~Daily.confirmed,order=1,data=firstlockdown)
firstwave=finaldata[104:228,]
grangertest(return~Daily.confirmed,order=1,data=firstwave)
grangertest(return~Daily.confirmed,order=2,data=firstwave)
firstwave=finaldata[23:228,]
grangertest(return~Daily.confirmed,order=1,data=firstwave)
grangertest(return~Daily.confirmed,order=2,data=firstwave)
grangertest(return~Daily.confirmed,order=3,data=firstwave)
firstlockdownnifty50=finaldata1[22:62,]
grangertest(return~Daily.confirmed,order=1,data=firstlockdownnifty50)
grangertest(return~Daily.confirmed,order=2,data=firstlockdownnifty50)
grangertest(return~Daily.confirmed,order=3,data=firstlockdownnifty50)
grangertest(return~Daily.confirmed,order=4,data=firstlockdownnifty50)
firstwave=finaldata[82:228,]
grangertest(return~Daily.confirmed,order=1,data=firstwave)
grangertest(return~Daily.confirmed,order=2,data=firstwave)
grangertest(return~Daily.confirmed,order=3,data=firstwave)
grangertest(return~Daily.confirmed,order=1,data=firstwavenifty50)
grangertest(return~Daily.confirmed,order=2,data=firstwavenifty50)
firstwavenifty50=finaldata1[82:228,:]
grangertest(return~Daily.confirmed,order=1,data=firstwavenifty50)
grangertest(return~Daily.confirmed,order=2,data=firstwavenifty50)
firstwavenifty50=finaldata1[82:228,]
grangertest(return~Daily.confirmed,order=1,data=firstwavenifty50)
grangertest(return~Daily.confirmed,order=2,data=firstwavenifty50)
grangertest(return~Daily.confirmed,order=3,data=firstwavenifty50)
library(lmtest)
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
finaldata
price=finaldata$Close
log_return=diff(log(price),lag=1)
finaldata=finaldata[-1,]
finaldata['return']=log_return
grangertest(Close~Daily.confirmed,order=1,data=finaldata)
grangertest(Close~Daily.confirmed,order=2,data=finaldata)
grangertest(Close~Daily.confirmed,order=2,data=finaldata)
grangertest(Close~Daily.confirmed,order=3,data=finaldata)
grangertest(Close~Daily.confirmed,order=1,data=finaldata1)
grangertest(Close~Daily.confirmed,order=2,data=finaldata1)
finaldata1=read.csv('timeseries1.csv')
price1=finaldata1$Close
log_return1=diff(log(price1),lag=1)
finaldata1=finaldata1[-1,]
finaldata1['return']=log_return1
grangertest(Close~Daily.confirmed,order=1,data=finaldata1)
grangertest(Close~Daily.confirmed,order=2,data=finaldata1)
firstlockdown=finaldata[22:62,]
grangertest(Close~Daily.confirmed,order=1,data=firstlockdown)
grangertest(Close~Daily.confirmed,order=2,data=firstlockdown)
firstwave=finaldata[82:228,]
grangertest(Close~Daily.confirmed,order=1,data=firstwave)
grangertest(Close~Daily.confirmed,order=2,data=firstwave)
grangertest(Close~Daily.confirmed,order=3,data=firstwave)
firstwave=finaldata[110:228,]
grangertest(Close~Daily.confirmed,order=1,data=firstwave)
grangertest(Close~Daily.confirmed,order=2,data=firstwave)
grangertest(Close~Daily.confirmed,order=3,data=firstwave)
firstlockdownnifty50=finaldata1[22:62,]
grangertest(Close~Daily.confirmed,order=1,data=firstlockdownnifty50)
grangertest(Close~Daily.confirmed,order=2,data=firstlockdownnifty50)
grangertest(Close~Daily.confirmed,order=3,data=firstlockdownnifty50)
grangertest(Close~Daily.confirmed,order=4,data=firstlockdownnifty50)
firstwavenifty50=finaldata1[82:228,]
grangertest(Close~Daily.confirmed,order=1,data=firstwavenifty50)
grangertest(Close~Daily.confirmed,order=2,data=firstwavenifty50)
grangertest(Close~Daily.confirmed,order=3,data=f
library(lmtest)
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
finaldata
test1=lm(finaldata$Close~finaldata$Daily.confirmed)
res1=test1$residuals
library(tseries)
library(timeseries)
library(forecast)
library(quantmod)
library(xts)
library(timeSeries)
install.packages("timeSeries")
library(timeSeries)
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
adf.test(finaldata$Close,alternative='non-stationary')
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
adf.test(finaldata$Close,alternative='stationary')
adf.test(finaldata$Daily.confirmed,alternative='stationary')
test1=lm(finaldata$Close~finaldata$Daily.confirmed)
res1=test1$residuals
adf.test(res1,alternative='stationary')
?adf.test
adf.test(res1,alternative='stationary',k=1)
adf.test(res1,alternative='stationary',k=2)
adf.test(res1,alternative='stationary',k=9)
adf.test(res1,alternative='stationary',k=7)
adf.test(res1,alternative='stationary',k=8)
adf.test(res1,alternative='stationary',k=2)
adf.test(res1,alternative='stationary',k=3)
adf.test(res1,alternative='stationary',k=4)
adf.test(res1,alternative='stationary',k=5)
adf.test(res1,alternative='stationary',k=6)
adf.test(res1,alternative='stationary',k=7)
finaldata1=read.csv('timeseries1.csv')
adf.test(finaldata1$Close,alternative='stationary')
adf.test(finaldata1$Daily.confirmed,alternative='stationary')
test2=lm(finaldata1$Close~finaldata1$Daily.confirmed)
res2=test2$residuals
adf.test(res2,alternative='stationary')
ndiffs(finaldata$Close)
ndiffs(finaldata$Daily.Confirmed)
y=finaldata$Daily.Confirmed[-1]
test1=lm(diff(finaldata$Close)~y)
res1=test1$residuals
adf.test(res1,alternative='stationary')
x=diff(finaldata$Close,lag=1)
test1=lm(x~y)
y
y=finaldata$Daily.Confirmed[2:]
y=finaldata$Daily.Confirmed[2:(length(finaldata$Daily.Confirmed)+1)]
x=diff(finaldata$Close,lag=1)
test1=lm(x~y)
y
y=finaldata$Daily.Confirmed
y
finaldata=read.csv('timeseries.csv')
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
adf.test(finaldata$Close,alternative='stationary')
ndiffs(finaldata$Close)
adf.test(finaldata$cases,alternative='stationary')
ndiffs(finaldata$cases)
y=diff(finaldata$cases,lag=1)
x=diff(finaldata$Close,lag=1)
test1=lm(x~y)
res1=test1$residuals
adf.test(res1,alternative='stationary')
?adf.test
grangertest(Close~Daily.confirmed,order=1,data=finaldata)
grangertest(Close~cases,order=1,data=finaldata)
grangertest(x~y,order=2,data=finaldata)
grangertest(x~y,order=1,data=finaldata)
grangertest(x~y,order=3,data=finaldata)
grangertest(x~y,order=6,data=finaldata)
grangertest(x~y,order=5,data=finaldata)
grangertest(x~y,order=4,data=finaldata)
ndiffs(finaldata1$Close)
finaldata1=read.csv('timeseries1.csv')
adf.test(finaldata1$Close,alternative='stationary')
ndiffs(finaldata1$Close)
#################wholedatafornifty50################
finaldata1=read.csv('timeseries1.csv')
adf.test(finaldata1$Close,alternative='stationary')
ndiffs(finaldata1$Close)
adf.test(finaldata1$cases,alternative='stationary')
ndiffs(cases)
ndiffs(finaldata1$cases)
y1=diff(finaldata1$cases,lag=1)
x1=diff(finaldata1$Close,lag=1)
test2=lm(x1~y1)
res2=test2$residuals
adf.test(res2,alternative='stationary')
grangertest(x1~y1,order=1,data=finaldata1)
grangertest(x1~y1,order=1,data=finaldata1)
grangertest(x1~y1,order=2,data=finaldata1)
grangertest(x1~y1,order=3,data=finaldata1)
firstlockdown=finaldata[22:62,]
adf.test(finaldata1$Close,alternative='stationary')
ndiffs(finaldata1$Close)
adf.test(finaldata1$cases,alternative='stationary')
ndiffs(finaldata1$cases)
adf.test(firstlockdown$Close,alternative='stationary')
ndiffs(firstlockdown$Close)
adf.test(firstlockdown$cases,alternative='stationary')
ndiffs(firstlockdown$cases)
y=firstlockdown$cases[-1]
y
y2=firstlockdown$cases[-1]
test3=lm(x2~y2)
res3=test3$residuals
adf.test(res3,alternative='stationary')
x2=diff(finaldata1$Close,lag=1)
y2=firstlockdown$cases[-1]
test3=lm(x2~y2)
res3=test3$residuals
adf.test(res3,alternative='stationary')
length(x2)
length(y2)
x2=diff(firstlockdown$Close,lag=1)
length(x2)
length(y2)
test3=lm(x2~y2)
res3=test3$residuals
adf.test(res3,alternative='stationary')
res3=test3$residuals
adf.test(res3,alternative='stationary',lag=4)
res3=test3$residuals
adf.test(res3,alternative='stationary',k=4)
adf.test(res3,alternative='stationary',k=1)
adf.test(res3,alternative='stationary',k=2)
length(x22)
x22=diff(firstlockdown$Close,lag=2)
length(x22)
length(y22)
y22=diff(firstlockdown$cases,lag=1)
length(y22)
grangertest(x2~y2[-1],order=1,data=finallockdown)
grangertest(x2~y2[-1],order=1,data=firstlockdown)
grangertest(x22~y22[-1],order=1,data=firstlockdown)
grangertest(x22~y22[-1],order=1)
grangertest(x22~y22[-1],order=3)
grangertest(x22~y22[-1],order=2)
firstwave=finaldata[110:228,]
adf.test(firstwave$Close,alternative='stationary')
ndiffs(firstwave$Close)
adf.test(firstwave$cases,alternative='stationary')
ndiffs(firstwave$cases)
x3=firstwave$Close[-2]
y3=diff(firstwave$cases,lag=1)
x3=firstwave$Close[-1]
test4=lm(x3~y3)
res4=test4$residuals
adf.test(res3,alternative='stationary')
adf.test(res4,alternative='stationary')
firstlockdownnifty50=finaldata1[22:62,]
adf.test(firstlockdownnifty50$Close,alternative='stationary')
ndiffs(firstlockdownnifty50$Close)
adf.test(firstlockdownnifty50$cases,alternative='stationary')
ndiffs(firstlockdownnifty50$cases)
test5=lm(firstlockdownnifty50$Close~firstlockdownnifty50$cases)
res5=test5$residuals
adf.test(res5,alternative='stationary')
adf.test(firstwavenifty50$Close,alternative='stationary')
ndiffs(firstwavenifty50$Close)
adf.test(firstwavenifty50$cases,alternative='stationary')
ndiffs(firstwavenifty50$cases)
firstwavenifty50=finaldata1[82:228,]
adf.test(firstwavenifty50$Close,alternative='stationary')
ndiffs(firstwavenifty50$Close)
adf.test(firstwavenifty50$cases,alternative='stationary')
ndiffs(firstwavenifty50$cases)
adf.test(y6,alternative='stationary')
x6=firstwavenifty50$Close[-2]
y6=diff(firstwave$cases,lag=2)
adf.test(y6,alternative='stationary')
y6=diff(firstwave$cases,lag=1)
adf.test(y6,alternative='stationary')
x6=firstwavenifty50$Close[-1]
y6=diff(firstwave$cases,lag=1)
adf.test(y6,alternative='stationary')
test7=lm(x6~y6)
res7=test7$residuals
x6=firstwavenifty50$Close[-1]
y6=diff(firstwavenifty50$cases,lag=1)
adf.test(y6,alternative='stationary')
test7=lm(x6~y6)
res7=test7$residuals
adf.test(res7,alternative='stationary')
midcap=read.csv('C:\Users\LENOVO\Downloads\midcap.csv')
midcap=read.csv('C:/Users/LENOVO/Downloads/midcap.csv')
midcap=read.csv('C:/Users/LENOVO/Downloads/midcap.csv')
adf.test(midcap$Close,alternative='stationary')
ndiffs(midcap$Close)
adf.test(midcap$cases,alternative='stationary')
ndiffs(midcap$cases)
y8=diff(finaldata$cases,lag=1)
x8=diff(finaldata$Close,lag=1)
test8=lm(x8~y8)
res8=test8$residuals
adf.test(res8,alternative='stationary')
y88=diff(finaldata$cases,lag=2)
x88=diff(finaldata$Close,lag=2)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
y88=diff(finaldata$cases,lag=1)
adf.test(y88,alternative='stationary')
adf.test(finaldata$cases,alternative='stationary')
y8=diff(midcap$cases,lag=1)
x8=diff(midcap$Close,lag=1)
test8=lm(x8~y8)
res8=test8$residuals
adf.test(res8,alternative='stationary')
y88=diff(midcap$cases,lag=2)
x88=diff(midcap$Close,lag=2)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88~y88,order=1)
grangertest(x88~y88,order=2)
grangertest(x88~y88,order=3)
grangertest(x88~y88,order=4)
install.packages("knitr")
knitr::opts_chunk$set(echo = TRUE)
ndiffs(finaldata$cases)
library(forecast)
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
adf.test(finaldata$Close,alternative='stationary')
ndiffs(finaldata$Close)
adf.test(finaldata$cases,alternative='stationary')
ndiffs(finaldata$cases)
y=diff(finaldata$cases,lag=1)
x=diff(finaldata$Close,lag=1)```
```
```{r cars}
library(astsa)
ndiffs(finaldata$cases)
adf.test(res1,alternative='stationary')
library(aTSA)
library(lmtest)
library(lmtest)
library(tseries)
library(timeseries)
library(lmtest)
library(tseries)
library(forecast)
library(astsa)
rm(list=ls())
##########wholedataforniftysmallcap#####################
finaldata=read.csv('timeseries.csv')
adf.test(finaldata$Close,alternative='stationary')
ndiffs(finaldata$Close)
adf.test(finaldata$cases,alternative='stationary')
ndiffs(finaldata$cases)
y=diff(finaldata$cases,lag=1)
x=diff(finaldata$Close,lag=1)
test1=lm(x~y)
res1=test1$residuals
adf.test(res1,alternative='stationary')
y=diff(finaldata$cases,lag=1)
x=diff(finaldata$Close,lag=1)
test1=lm(x~y)
res1=test1$residuals
adf.test(res1,alternative='stationary')
grangertest(diff(finaldata$Close,lag=2)~diff(finaldata$cases,lag=2),order=1)
tinytex::install_tinytex()
ndiffs(finaldata1$cases)
finaldata1=read.csv('timeseries1.csv')
adf.test(finaldata1$Close,alternative='stationary')
ndiffs(finaldata1$Close)
adf.test(finaldata1$cases,alternative='stationary')
ndiffs(finaldata1$cases)
adf.test(res2,alternative='stationary')
y1=diff(finaldata1$cases,lag=1)
x1=diff(finaldata1$Close,lag=1)
test2=lm(x1~y1)
res2=test2$residuals
adf.test(res2,alternative='stationary')
grangertest(diff(finaldata1$Close,lag=2)~diff(finaldata1$cases,lag=2),order=1)
firstlockdown=finaldata[22:62,]
adf.test(firstlockdown$Close,alternative='stationary')
ndiffs(firstlockdown$Close)
adf.test(firstlockdown$cases,alternative='stationary')
ndiffs(firstlockdown$cases)
x2=diff(firstlockdown$Close,lag=1)
x22=diff(firstlockdown$Close,lag=2)
y2=firstlockdown$cases[-1]
y22=diff(firstlockdown$cases,lag=1)
test3=lm(x2~y2)
res3=test3$residuals
adf.test(res3,alternative='stationary',k=1)
grangertest(x22~y22[-1],order=1)
firstwave=finaldata[110:228,]
adf.test(firstwave$Close,alternative='stationary')
ndiffs(firstwave$Close)
adf.test(firstwave$cases,alternative='stationary')
ndiffs(firstwave$cases)
x3=firstwave$Close[-1]
y3=diff(firstwave$cases,lag=1)
test4=lm(x3~y3)
res4=test4$residuals
adf.test(res4,alternative='stationary')
firstlockdownnifty50=finaldata1[22:62,]
adf.test(firstlockdownnifty50$Close,alternative='stationary')
ndiffs(firstlockdownnifty50$Close)
adf.test(firstlockdownnifty50$cases,alternative='stationary')
ndiffs(firstlockdownnifty50$cases)
test5=lm(firstlockdownnifty50$Close~firstlockdownnifty50$cases)
res5=test5$residuals
adf.test(res5,alternative='stationary')
firstwavenifty50=finaldata1[82:228,]
adf.test(firstwavenifty50$Close,alternative='stationary')
ndiffs(firstwavenifty50$Close)
adf.test(firstwavenifty50$cases,alternative='stationary')
ndiffs(firstwavenifty50$cases)
x6=firstwavenifty50$Close[-1]
y6=diff(firstwavenifty50$cases,lag=1)
adf.test(y6,alternative='stationary')
test7=lm(x6~y6)
res7=test7$residuals
adf.test(res7,alternative='stationary')
midcap=read.csv('C:/Users/LENOVO/Downloads/midcap.csv')
adf.test(midcap$Close,alternative='stationary')
ndiffs(midcap$Close)
adf.test(midcap$cases,alternative='stationary')
ndiffs(midcap$cases)
adf.test(res8,alternative='stationary')
y8=diff(midcap$cases,lag=1)
x8=diff(midcap$Close,lag=1)
test8=lm(x8~y8)
res8=test8$residuals
adf.test(res8,alternative='stationary')
y88=diff(midcap$cases,lag=2)
x88=diff(midcap$Close,lag=2)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88~y88,order=1)
y88=diff(midcap$cases,lag=1)
x88=diff(midcap$Close,lag=1)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88~y88,order=1)
y88=diff(midcap$cases,lag=3)
x88=diff(midcap$Close,lag=3)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88~y88,order=1)
y88=diff(midcap$cases,lag=4)
x88=diff(midcap$Close,lag=4)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88~y88,order=1)
y88=diff(midcap$cases,lag=3)
x88=diff(midcap$Close,lag=4)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88[-1]~y88,order=1)
y88=diff(midcap$cases,lag=4)
x88=diff(midcap$Close,lag=3)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88~y88,order=1)
y88=diff(midcap$cases,lag=4)
x88=diff(midcap$Close,lag=3)
adf.test(x88,alternative='stationary')
adf.test(y88,alternative='stationary')
grangertest(x88[-1]~y88,order=1)
